<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
  
    <!-- view para el boton-->
    <record model="ir.actions.act_window" id="open_prueba">
      <field name="name">Grafica</field>
      <field name="res_model">coop2.historial</field>
      <field name="view_mode">graph</field>
      <field name="domain">[('socio_id', '=', active_id)]</field>
      <field name="context">{}</field>
    </record>
  
    <record id="view_socio_form" model="ir.ui.view">
      <field name="name">res.partner.inherit</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='street']" position="before">
          <field name="direccion"/>
        </xpath>
        <xpath expr="//field[@name='street']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        <xpath expr="//field[@name='street2']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        <xpath expr="//field[@name='city']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        <xpath expr="//field[@name='state_id']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        <xpath expr="//field[@name='zip']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        <xpath expr="//field[@name='country_id']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        <xpath expr="//field[@name='vat']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>

        <xpath expr="//field[@name='type']" position="before">
          <field name="dni"/>
          <field name="fecha_nac"/>
          <field name="sexo"/>
          <field name="estado_civil"/>
          <field name="es_socio"/>
          <field name="departamento_nac"/>
          <field name="provincia_nac"/>
          <field name="distrito_nac"/>
        </xpath>

        <xpath expr="//page[3]" position="after">
          <page string="Cabañas del socio" attrs="{'invisible':[('es_socio', '==', False)]}">
            <group>
              <group>
<!--                <field name="num_camelidos"/>-->
                <field name="num_cabanas"/>
                <field name="num_parcelas"/>
                <field name="num_potreros"/>
              </group>
              <group>
                <field name="cabanas">
                  <tree editable="bottom">
                    <field name="nombre"/>
                    <field name="comunidad"/>
                    <field name="distrito_cab"/>
                    <field name="provincia_cab"/>
                    <field name="departamento_cab"/>
                    <field name="socio_id" invisible="1"/> 
                  </tree>
                </field>
              </group>
            </group>
          </page>
          <!--
          <page string="Características de los camélidos" attrs="{'invisible':[('es_socio', '==', False)]}">
            <group>
              <group>
                <field name="num_camelidos"/>
              </group>
              <group>
                <field name="num_alpacas_huacayo"/>
                <field name="num_alpacas_suri"/>
              </group>
              <group>
                <field name="num_alpacas_macho"/>
                <field name="num_alpacas_hembra"/>
              </group>
              
              <button name="%(open_prueba)d" string="Mostrar historial" type="action" class="oe_highlight"/>

              <field name="historial">
                <tree editable="bottom"> 
                  <field name="fecha_muestreo"/>
                  <field name="num_camelidos_macho"/>
                  <field name="num_camelidos_hembra"/>
                  <field name="num_camelidos"/>
                </tree>
              </field>
            </group>
          </page>
          -->
          <page string="Familia y vivienda" attrs="{'invisible':[('es_socio', '==', False)]}">
            <group>
              <group string="Caractéristicas de domicilio">
                <field name="dom_permanente"/>
                <field name="dom_transitorio"/>
                <field name="personas_nucleo"/>
              </group>
              <group string="Familia">
                <field name="num_hijos_1"/>
                <field name="num_hijos_2"/>
                <field name="num_hijos_3"/>
                <field name="num_hijos_4"/>
                <field name="num_hijos_5"/>
                <field name="num_hijos_total"/>
              </group>
            </group>
          </page>
          <page string="Datos requeridos">
            <group>
              <group string="Alpacas por edad/género">
                <field name="suri_total"/>
                <field name="huacaya_total"/>
                <field name="macho_adulto_total"/>
                <field name="hembra_adulto_total"/>
                <field name="tui_macho_total"/>
                <field name="tui_hembra_total"/>
                <field name="menores_total"/>
              </group>
              <group string="Alpacas por raza">
                <field name="suri_total"/>
                <field name="huacaya_total"/>
              </group>
              <group string="Total de alpacas">
                <field name="alpacas_total"/>
              </group>

            </group>
            
          </page>
        </xpath>
      </field>
    </record>

    <record id="socio_camelido_graph" model="ir.ui.view">
      <field name="name">coop2.socio_camelido</field>
      <field name="model">res.partner</field>
      <field name="type">graph</field>
      <field name="arch" type="xml">
        <graph string="Gráfica">
          <field name="name"/>
          <!--<field name="num_camelidos" type="measure"/>-->
          <field name="alpacas_total" type="measure"/>
        </graph>
      </field>
    </record>

    <!-- graph views -->
    <!--
    <record id="socio_graph" model="ir.ui.view">
      <field name="name">coop2.socio_camelido</field>
      <field name="model">res.partner</field>
      <field name="type">graph</field>
      <field name="arch" type="xml">
        <graph string="Gráfica">
          <field name="name"/>
          <field name="num_camelidos" type="measure"/>
        </graph>
      </field>
    </record>


    <record id="historial_graph" model="ir.ui.view">
      <field name="name">coop2.historial_camelido</field>
      <field name="model">coop2.historial</field>
      <field name="type">graph</field>
      <field name="arch" type="xml">
        <graph string="Gráfica">
          <field name="fecha_muestreo"/>
          <field name="num_camelidos" type="measure"/>
        </graph>
      </field>
    </record>-->
    
    
    <!-- Filter View
    <record id="view_res_partner_inherit_rearch" model="ir.ui.view">
      <field name="name">res.partner.search.expand.filter</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_res_partner_filter"/>
      <field name="arch" type="xml">
        <xpath expr="//search" position="inside">
          <filter string="Socios" name="filter_socio" domain="[('es_socio', '=', True)]"/>
        </xpath>
      </field>
    </record>
    
    -->
    
    
    <record id="action_socio" model="ir.actions.act_window">
      <field name="name">Socios</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">res.partner</field>
     <!-- <field name="context"> {"search_default_filter_socio":1} </field>  search_default_<filter name>  -->
      <field name="context">{}</field>
      <field name="domain">[('es_socio', '=', True)]</field>
      <field name="view_type">form</field>
      <field name="view_mode">kanban,tree,form,graph</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Agrege un socio.        
        </p>
      </field>
    </record>
        
    <menuitem id="coop_root" name="Coopecan" sequence="" />
    <menuitem id="coop_socio" name="Socios"  sequence="0"  parent="coop_root" action="action_socio"/>

  </data>

</odoo>
