<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <record id="view_socio_form" model="ir.ui.view">
      <field name="name">res.partner.inherit</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='vat']" position="after">
          <field name="es_socio"/>
        </xpath>
        <xpath expr="//page[3]" position="after">

          <page string="Cabañas del socio" attrs="{'invisible':[('es_socio', '==', False)]}">
            <group>
              <field name="cabanas">
                <tree editable="bottom">
                  <field name="nombre"/>
                  <field name="comunidad"/>
                  <field name="distrito_cab"/>
                  <field name="provincia_cab"/>
                  <field name="departamento_cab"/>
                  <field name="socio_id" invisible="1"/> 
                </tree>
              </field>
            </group>
          </page>
          <page string="Resumen" attrs="{'invisible':[('es_socio', '==', False)]}">
            <group>
              <field name="num_camelidos"/>
              <field name="num_cabanas"/>
              <field name="num_parcelas"/>
              <field name="num_potreros"/>
            </group>
          </page>
          <page string="Características de los camélidos" attrs="{'invisible':[('es_socio', '==', False)]}">
            <group>
              <group>
                <field name="num_camelidos"/>
              </group>

              <group>
                <field name="num_alpacas_huacayo"/>
                <field name="num_alpacas_suri"/>
              </group>
              <group>
                <field name="num_alpacas_macho"/>
                <field name="num_alpacas_hembra"/>
              </group>

            </group>
          </page>
        </xpath>
      </field>
    </record>
    
    
    <!-- graph view -->
    <record id="socio_graph" model="ir.ui.view">
      <field name="name">coop2.socio_camelido</field>
      <field name="model">res.partner</field>
      <field name="type">graph</field>
      <field name="arch" type="xml">
        <graph string="Gráfica">
          <field name="name"/>
          <field name="num_camelidos" type="measure"/>
        </graph>
      </field>
    </record>

    
    
    <record id="view_res_partner_inherit_rearch" model="ir.ui.view">
      <field name="name">res.partner.search.expand.filter</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_res_partner_filter"/>
      <field name="arch" type="xml">
        <xpath expr="//search" position="inside">
          <filter string="Socios" name="filter_socio" domain="[('es_socio', '=', True)]"/>
        </xpath>
      </field>
    </record>
    
    
    
    
    <record id="action_socio" model="ir.actions.act_window">
    <field name="name">Socios</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">res.partner</field>
    <field name="context"> {"search_default_filter_socio":1} </field> <!-- search_default_<filter name>  -->
    <field name="view_type">form</field>
    <field name="view_mode">kanban,tree,form,graph</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Agrege un socio.        
      </p>
    </field>
  </record>
    
    
    
    
    <menuitem id="coop_root" name="Coopecan 2" sequence="" />
    <menuitem id="coop_socio" name="Socios"  sequence="0"  parent="coop_root" action="action_socio"/>
  </data>

</odoo>
